<!DOCTYPE html>
<html lang="fr">
    <!-- Apr√®s <title> et avant </head> -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase-config.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche ECOS - MedFormation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #F9FAFB;
            color: #374151;
            line-height: 1.7;
        }

        .header {
            background: white;
            border-bottom: 1px solid #E5E7EB;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            color: #2563EB;
            font-size: 24px;
            font-weight: 700;
            text-decoration: none;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 73px;
            bottom: 0;
            width: 260px;
            background: white;
            border-right: 1px solid #E5E7EB;
            padding: 24px 0;
            overflow-y: auto;
        }

        .nav-item {
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #6B7280;
            text-decoration: none;
            transition: all 0.2s;
            font-weight: 500;
        }

        .nav-item:hover {
            background: #F9FAFB;
            color: #2563EB;
        }

        .nav-item.active {
            background: #EFF6FF;
            color: #2563EB;
            border-right: 3px solid #2563EB;
        }

        .main-content {
            margin-left: 260px;
            padding: 40px;
            max-width: 1200px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #2563EB;
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 24px;
        }

        .back-button:hover {
            text-decoration: underline;
        }

        .ecos-header {
            background: linear-gradient(135deg, #2563EB 0%, #1d4ed8 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .ecos-header h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .ecos-icon {
            font-size: 48px;
        }

        .ecos-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 16px;
            opacity: 0.9;
            flex-wrap: wrap;
        }

        .ecos-meta span {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
        }

        .ecos-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            border: 1px solid #E5E7EB;
        }

        .section {
            margin-bottom: 48px;
        }

        .section h2 {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #2563EB;
        }

        .section h3 {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin-top: 24px;
            margin-bottom: 16px;
        }

        .section p {
            margin-bottom: 16px;
            color: #6B7280;
            line-height: 1.8;
        }

        .highlight-box {
            background: #FEF3C7;
            border-left: 4px solid #F59E0B;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #B45309;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .highlight-box p {
            color: #92400E;
        }

        .important-box {
            background: #ECFDF5;
            border-left: 4px solid #10B981;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .important-box h4 {
            color: #065F46;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .important-box p {
            color: #047857;
        }

        .danger-box {
            background: #FEF2F2;
            border-left: 4px solid #EF4444;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .danger-box h4 {
            color: #991B1B;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .danger-box p {
            color: #7F1D1D;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: #EFF6FF;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #111827;
            border-bottom: 2px solid #2563EB;
        }

        td {
            padding: 16px;
            border-bottom: 1px solid #E5E7EB;
            color: #6B7280;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #F9FAFB;
        }

        .evaluation-grid {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .evaluation-item {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #E5E7EB;
        }

        .evaluation-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .evaluation-points {
            background: #2563EB;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            flex-shrink: 0;
        }

        .evaluation-details h4 {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .evaluation-details p {
            font-size: 14px;
            color: #6B7280;
        }

        .mistakes-list {
            list-style: none;
            margin-left: 0;
        }

        .mistakes-list li {
            padding: 12px 0;
            padding-left: 28px;
            color: #6B7280;
            position: relative;
            border-bottom: 1px solid #E5E7EB;
        }

        .mistakes-list li:last-child {
            border-bottom: none;
        }

        .mistakes-list li::before {
            content: "‚ö†Ô∏è";
            position: absolute;
            left: 0;
            font-size: 16px;
        }

        .competencies-badge {
            display: inline-block;
            background: #EFF6FF;
            color: #2563EB;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin: 6px 6px 6px 0;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin: 6px 6px 6px 0;
        }

        .difficulty-easy {
            background: #ECFDF5;
            color: #065F46;
        }

        .difficulty-medium {
            background: #FEF3C7;
            color: #92400E;
        }

        .difficulty-hard {
            background: #FEF2F2;
            color: #991B1B;
        }

        .download-section {
            margin-top: 40px;
            padding-top: 40px;
            border-top: 2px solid #E5E7EB;
            display: flex;
            gap: 16px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #2563EB;
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: #E5E7EB;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #D1D5DB;
        }

        .btn-success {
            background: #10B981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .ecos-header {
                padding: 24px;
            }

            .ecos-header h1 {
                font-size: 24px;
            }

            .section h2 {
                font-size: 22px;
            }

            .ecos-content {
                padding: 20px;
            }

            .evaluation-item {
                flex-direction: column;
                gap: 12px;
            }

            .evaluation-points {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="dashboard.html" class="logo">üè• MedFormation</a>
    </header>

    <aside class="sidebar">
        <a href="dashboard.html" class="nav-item">
            <span>üè†</span> Dashboard
        </a>
        <a href="courses.html" class="nav-item">
            <span>üìö</span> Cours
        </a>
        <a href="qcm.html" class="nav-item">
            <span>‚úèÔ∏è</span> QCM
        </a>
        <a href="ecos.html" class="nav-item active">
            <span>üéØ</span> ECOS
        </a>
        <a href="progress.html" class="nav-item">
            <span>üìä</span> Progression
        </a>
        <a href="account.html" class="nav-item">
            <span>‚öôÔ∏è</span> Mon Compte
        </a>
    </aside>

    <main class="main-content">
        <a href="ecos.html" class="back-button">‚Üê Retour aux fiches ECOS</a>

        <div class="ecos-header" id="ecosHeader">
            <h1>
                <span class="ecos-icon" id="ecosIcon">üéØ</span>
                <span id="ecosTitle">Fiche ECOS</span>
            </h1>
            <div class="ecos-meta">
                <span id="ecosSpecialty">Sp√©cialit√©</span>
                <span id="ecosCompetency">Comp√©tence</span>
                <span id="ecosDifficulty">Difficult√©</span>
            </div>
        </div>

        <div class="ecos-content">
            <!-- SECTION 1 : CONTEXTE -->
            <div class="section">
                <h2>üè• Contexte clinique</h2>
                <p id="ecosContext">Contexte de la station...</p>
            </div>

            <!-- SECTION 2 : OBJECTIFS -->
            <div class="section">
                <h2>üéØ Objectifs de la station</h2>
                <p id="ecosObjectives">Objectifs p√©dagogiques...</p>
                <div class="important-box">
                    <h4>Comp√©tences cibl√©es</h4>
                    <div id="ecosCompetencies">
                        <!-- Comp√©tences seront ins√©r√©es ici -->
                    </div>
                </div>
            </div>

            <!-- SECTION 3 : D√âROULEMENT -->
            <div class="section">
                <h2>üìã D√©roulement de la station</h2>
                <table>
                    <tr>
                        <th>Phase</th>
                        <th>Dur√©e</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><strong>Pr√©paration</strong></td>
                        <td>2 min</td>
                        <td>Lecture du dossier patient et des instructions</td>
                    </tr>
                    <tr>
                        <td><strong>Interaction</strong></td>
                        <td>8 min</td>
                        <td>Consultation avec l'acteur jouant le r√¥le du patient</td>
                    </tr>
                    <tr>
                        <td><strong>Documentation</strong></td>
                        <td>5 min</td>
                        <td>R√©daction d'un r√©sum√© ou ordonnance si n√©cessaire</td>
                    </tr>
                </table>
            </div>

            <!-- SECTION 4 : GRILLE D'√âVALUATION -->
            <div class="section">
                <h2>üìä Grille d'√©valuation (20 points)</h2>
                <div class="evaluation-grid" id="ecosGrille">
                    <!-- La grille sera ins√©r√©e ici par JavaScript -->
                </div>
            </div>

            <!-- SECTION 5 : PI√àGES COURANTS -->
            <div class="section">
                <h2>‚ö†Ô∏è Pi√®ges √† √©viter</h2>
                <div class="danger-box">
                    <h4>Erreurs fr√©quemment observ√©es</h4>
                    <ul class="mistakes-list" id="ecosMistakes">
                        <!-- Les pi√®ges seront ins√©r√©s ici -->
                    </ul>
                </div>
            </div>

            <!-- SECTION 6 : CONSEILS DE R√âUSSITE -->
            <div class="section">
                <h2>üí° Conseils de r√©ussite</h2>
                <div class="highlight-box">
                    <h4>Cl√©s du succ√®s</h4>
                    <ul style="list-style: disc; margin-left: 20px; color: #92400E;">
                        <li>Organiser votre pens√©e avant de parler</li>
                        <li>√âcouter activement le patient/l'examinateur</li>
                        <li>Adapter votre communication au public</li>
                        <li>Respecter la gestion du temps</li>
                        <li>Montrer de l'empathie et du professionnalisme</li>
                        <li>Justifier chacune de vos d√©cisions</li>
                    </ul>
                </div>
            </div>

            <!-- SECTION 7 : RESSOURCES -->
            <div class="section">
                <h2>üìö Ressources compl√©mentaires</h2>
                <div class="important-box">
                    <h4>Contenus recommand√©s</h4>
                    <ul style="list-style: disc; margin-left: 20px; color: #047857;">
                        <li><strong>Cours vid√©o :</strong> Consultez les cours correspondants dans votre biblioth√®que</li>
                        <li><strong>QCM th√©matiques :</strong> R√©viser avec les questions li√©es √† cette comp√©tence</li>
                        <li><strong>Cas cliniques :</strong> Pratiquer sur plusieurs sc√©narios similaires</li>
                        <li><strong>Feedback expert :</strong> Demander un retour sur votre performance</li>
                    </ul>
                </div>
            </div>

            <!-- SECTION 8 : ACTIONS -->
            <div class="download-section">
                <button class="btn btn-primary" onclick="markAsStudied()">‚úÖ Marquer comme √©tudi√©</button>
                <button class="btn btn-secondary" onclick="printPage()">üñ®Ô∏è Imprimer</button>
                <button class="btn btn-success" onclick="shareECOS()">üì§ Partager</button>
            </div>
        </div>
    </main>

    <script>
        // V√©rifier connexion
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }

        // R√©cup√©rer l'ID du ECOS depuis l'URL
        const params = new URLSearchParams(window.location.search);
        const ecosId = params.get('id');

        // Base de donn√©es ECOS (m√™me que dans ecos.html)
        const ecosDatabase = [
            {
                id: 1,
                title: "Consultation d'annonce - Infarctus du myocarde",
                specialty: "Cardiologie",
                competency: "Communication",
                difficulty: "Moyen",
                icon: "üí¨",
                is_free: true,
                context: "Patient de 58 ans hospitalis√© pour IDM depuis 2 jours. Vous devez lui annoncer le diagnostic d√©finitif et expliquer les cons√©quences en termes de pronostic et de prise en charge future.",
                objectives: "Annoncer un diagnostic grave de mani√®re structur√©e, √©valuer la compr√©hension du patient et son soutien familial, proposer un plan de prise en charge adapt√©, permettre au patient d'exprimer ses craintes.",
                mistakes: [
                    "Annoncer brutalement sans pr√©paration",
                    "Utiliser un jargon m√©dical sans explications",
                    "Ne pas laisser le patient s'exprimer",
                    "Oublier de questionner sur le soutien familial",
                    "Surcharger le patient d'informations",
                    "Ignorer l'impact psychologique du diagnostic"
                ],
                grille: [
                    { item: "Accueil et climat de confiance", points: 2 },
                    { item: "V√©rification des connaissances ant√©rieures", points: 1 },
                    { item: "Annonce progressive du diagnostic", points: 3 },
                    { item: "Utilisation d'un langage adapt√©", points: 2 },
                    { item: "√âvaluation de la compr√©hension", points: 2 },
                    { item: "Exploration des √©motions et craintes", points: 2 },
                    { item: "Information sur le pronostic et le traitement", points: 3 },
                    { item: "Exploration du soutien social", points: 2 },
                    { item: "Plan de suivi propos√©", points: 1 }
                ]
            },
            {
                id: 2,
                title: "Examen cardiovasculaire complet",
                specialty: "Cardiologie",
                competency: "Examen clinique",
                difficulty: "Moyen",
                icon: "ü©∫",
                is_free: true,
                context: "Patient de 65 ans consultant pour dyspn√©e d'effort progressive. R√©aliser un examen cardiovasculaire complet.",
                objectives: "R√©aliser un examen cardiovasculaire syst√©matique et complet, identifier les signes d'insuffisance cardiaque, d'arythmie ou de valvulopathie, int√©grer les donn√©es dans une d√©marche diagnostique.",
                mistakes: [
                    "Oublier la position assise √† 45¬∞",
                    "Ne pas ausculter les 4 foyers",
                    "Ignorer les ≈ìd√®mes des membres inf√©rieurs",
                    "Ne pas tester la man≈ìuvre abdominale",
                    "Manquer les signes de turgescence jugulaire"
                ],
                grille: [
                    { item: "Inspection g√©n√©rale", points: 1 },
                    { item: "Palpation des pouls p√©riph√©riques", points: 2 },
                    { item: "Mesure de la pression art√©rielle", points: 1 },
                    { item: "Auscultation aux 4 foyers", points: 3 },
                    { item: "Man≈ìuvre de Valsalva", points: 1 },
                    { item: "Recherche de turgescence jugulaire", points: 2 },
                    { item: "Palpation de l'abdomen (h√©patom√©galie)", points: 2 },
                    { item: "Recherche d'≈ìd√®mes", points: 2 },
                    { item: "Synth√®se diagnostic", points: 3 }
                ]
            },
            {
                id: 3,
                title: "Interpr√©tation d'ECG en urgence - SCA",
                specialty: "Cardiologie",
                competency: "Raisonnement",
                difficulty: "Difficile",
                icon: "üìà",
                is_free: false,
                context: "Patient de 52 ans aux urgences pour douleur thoracique depuis 30 min. ECG d'admission montrant sus-d√©calage du segment ST en ant√©rieur.",
                objectives: "Interpr√©ter l'ECG correctement, identifier le type et la localisation du SCA, proposer la prise en charge imm√©diate, expliquer le circuit th√©rapeutique.",
                mistakes: [
                    "Confondre sus-d√©calage et sous-d√©calage du ST",
                    "Oublier les d√©rivations post√©rieures (V7-V9)",
                    "Ne pas v√©rifier l'infarctus du VD",
                    "H√©siter sur la d√©cision th√©rapeutique",
                    "Retarder la prise en charge en attendant des tests suppl√©mentaires"
                ],
                grille: [
                    { item: "Identification du sus-d√©calage ST", points: 2 },
                    { item: "Localisation du SCA", points: 2 },
                    { item: "Recherche de complications", points: 2 },
                    { item: "Diagnostic diff√©rentiel", points: 2 },
                    { item: "D√©cision de l'orientation", points: 3 },
                    { item: "Communication urgence-coro", points: 2 },
                    { item: "Traitement initial", points: 2 },
                    { item: "Explication au patient", points: 3 }
                ]
            },
            {
                id: 4,
                title: "Pose de voie veineuse p√©riph√©rique",
                specialty: "Cardiologie",
                competency: "Geste technique",
                difficulty: "Facile",
                icon: "üíâ",
                is_free: true,
                context: "Patient n√©cessitant une VVP pour traitement intraveineux de morphine et anticoagulation.",
                objectives: "Poser une voie veineuse p√©riph√©rique en respectant les r√®gles d'asepsie et de s√©curit√©, s√©curiser la voie.",
                mistakes: [
                    "Oublier l'hygi√®ne des mains",
                    "Ne pas d√©sinfecter le site de ponction",
                    "Ponctionner une zone d'h√©matome",
                    "Laisser l'aiguille apparente",
                    "Ne pas assurer la perm√©abilit√© de la voie"
                ],
                grille: [
                    { item: "Information au patient", points: 1 },
                    { item: "Hygi√®ne des mains", points: 1 },
                    { item: "Choix du site appropri√©", points: 1 },
                    { item: "D√©sinfection du site", points: 2 },
                    { item: "Technique de ponction", points: 3 },
                    { item: "Retrait correct de l'aiguille", points: 2 },
                    { item: "Fixation de la voie", points: 2 },
                    { item: "V√©rification de la perm√©abilit√©", points: 1 },
                    { item: "Documentation", points: 2 }
                ]
            },
            {
                id: 5,
                title: "Prise en charge de l'arr√™t cardio-respiratoire",
                specialty: "Cardiologie",
                competency: "Urgence",
                difficulty: "Difficile",
                icon: "üö®",
                is_free: false,
                context: "Patient s'effondre devant vous aux urgences. Pas de pouls, pas de respiration. Vous √™tes en √©quipe de 3 personnes.",
                objectives: "D√©buter une RCP de qualit√©, organiser l'√©quipe, utiliser le DEA, assurer la ventilation et le massage.",
                mistakes: [
                    "Retarder le d√©but de la RCP",
                    "Compressions thoraciques insuffisantes (< 5 cm)",
                    "RCP trop rapide (> 120/min)",
                    "Oublier le DEA",
                    "Fatigue du r√©animateur non g√©r√©e"
                ],
                grille: [
                    { item: "V√©rification de l'√©tat de conscience", points: 1 },
                    { item: "Appel de secours", points: 1 },
                    { item: "Positionnement du patient", points: 1 },
                    { item: "Qualit√© du massage cardiaque", points: 3 },
                    { item: "Fr√©quence des compressions (100-120)", points: 2 },
                    { item: "Ventilation appropri√©e", points: 2 },
                    { item: "Utilisation du DEA", points: 3 },
                    { item: "Rotation de l'√©quipe", points: 2 },
                    { item: "Continuit√© de la RCP", points: 2 }
                ]
            }
        ];

        // Charger le ECOS correspondant
        function loadECOS() {
            const ecos = ecosDatabase.find(e => e.id == ecosId);
            
            if (!ecos) {
                document.body.innerHTML = '<h1 style="text-align: center; margin-top: 50px;">Fiche ECOS non trouv√©e</h1>';
                return;
            }

            // Mettre √† jour le header
            document.getElementById('ecosIcon').textContent = ecos.icon;
            document.getElementById('ecosTitle').textContent = ecos.title;
            document.getElementById('ecosSpecialty').textContent = 'üìç ' + ecos.specialty;
            document.getElementById('ecosCompetency').textContent = 'üéì ' + ecos.competency;
            document.getElementById('ecosDifficulty').innerHTML = '<span class="difficulty-badge difficulty-' + (ecos.difficulty === 'Facile' ? 'easy' : ecos.difficulty === 'Moyen' ? 'medium' : 'hard') + '">' + ecos.difficulty + '</span>';

            // Mettre √† jour le contenu
            document.getElementById('ecosContext').textContent = ecos.context;
            document.getElementById('ecosObjectives').textContent = ecos.objectives;

            // Comp√©tences
            const competenciesDiv = document.getElementById('ecosCompetencies');
            competenciesDiv.innerHTML = '';
            const competencies = [ecos.competency, 'Professionnalisme', 'Gestion du temps'];
            competencies.forEach(comp => {
                const badge = document.createElement('span');
                badge.className = 'competencies-badge';
                badge.textContent = comp;
                competenciesDiv.appendChild(badge);
            });

            // Grille d'√©valuation
            const grilleDiv = document.getElementById('ecosGrille');
            grilleDiv.innerHTML = '';
            let totalPoints = 0;
            ecos.grille.forEach(item => {
                totalPoints += item.points;
                const div = document.createElement('div');
                div.className = 'evaluation-item';
                div.innerHTML = `
                    <div class="evaluation-points">${item.points}</div>
                    <div class="evaluation-details">
                        <h4>${item.item}</h4>
                        <p>Crit√®re d'√©valuation important pour cette station</p>
                    </div>
                `;
                grilleDiv.appendChild(div);
            });

            // Pi√®ges
            const mistakesDiv = document.getElementById('ecosMistakes');
            mistakesDiv.innerHTML = '';
            ecos.mistakes.forEach(mistake => {
                const li = document.createElement('li');
                li.textContent = mistake;
                mistakesDiv.appendChild(li);
            });

            // V√©rifier acc√®s premium
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (!ecos.is_free && currentUser.subscription_status !== 'active') {
                document.querySelector('.ecos-content').innerHTML = '<div style="text-align: center; padding: 60px 20px;"><h2>üîí Contenu Premium</h2><p>Cette fiche ECOS est r√©serv√©e aux utilisateurs premium.</p><a href="pricing.html" class="btn btn-primary" style="margin-top: 20px;">D√©couvrir nos offres</a></div>';
                return;
            }
        }

        // Marquer comme √©tudi√©
        function markAsStudied() {
            let studied = JSON.parse(localStorage.getItem('studiedEcos') || '[]');
            if (!studied.includes(ecosId)) {
                studied.push(ecosId);
                localStorage.setItem('studiedEcos', JSON.stringify(studied));
            }
            alert('‚úÖ Fiche marqu√©e comme √©tudi√©e !');
        }

        // Imprimer
        function printPage() {
            window.print();
        }

        // Partager
        function shareECOS() {
            const text = 'D√©couvrez cette fiche ECOS sur MedFormation : ' + window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'Fiche ECOS',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('Lien copi√© dans le presse-papiers !');
            }
        }

        // Charger le ECOS √† l'ouverture
        loadECOS();
    </script>
</body>
</html>